{% extends 'base.html' %}

{% block head %}
<div class="p-5 text-white bg-image"
    style="background-image: url({{url_for('static', filename='img/1.png')}}); background-size:cover; min-height:400px;">
</div>
{% endblock %}

{% block main %}
<style>
    .btn.button {
        background-color: #FF8C3F;
        color: #fff;
        width: 100%;
        height: 50px;
        font-size: 16px;
    }

    .category-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        margin-right: 8px;
    }

    #items a {
        text-decoration: none;
        color: inherit;
    }

    #items a:hover,
    #items a:focus {
        text-decoration: none;
    }

    #items .card {
        cursor: pointer;
    }

    .card {
        display: flex;
        flex-direction: column;
    }

    .card-body {
        flex-grow: 1;
    }

    .card-footer {
        margin-top: auto;
        background-color: white;
        border-top: none;
    }
</style>

<!-- Category Buttons -->
<div class="text-center mb-4">
    <form method="GET" action="{{ url_for('main.index') }}">
        <div class="row justify-content-center">
            {% for cat in ['all', 'Rice', 'Noodle', 'Entree', 'Salad', 'Curry'] %}
            <div class="col-md-2 mb-2">
                <button type="submit" name="category" value="{{ cat }}"
                    class="btn {% if category == cat %}btn-secondary{% else %}btn-light{% endif %} w-100">
                    <span class="category-icon">
                        {% if cat == 'all' %}üìã{% elif cat == 'Rice' %}üçö{% elif cat == 'Noodle' %}üçù{% elif cat ==
                        'Entree' %}ü•ô{% elif cat == 'Salad' %}ü•ó{% elif cat == 'Curry' %}üçõ{% endif %}
                    </span> {{ cat }}
                </button>
            </div>
            {% endfor %}
        </div>
    </form>
</div>

<!-- Item List -->
<section class="shadow-sm p-5" id="items">
    <div class="row ps-2 pe-2">
        {% if items %}
        {% for item in items %}
        <div class="col-md-4 mb-4">
            <div class="card h-100 d-flex flex-column">
                <a href="{{ url_for('main.itemdetails', itemid=item.id) }}" class="text-decoration-none text-dark">
                    <img class="card-img-top" src="{{ url_for('static', filename='img/' + item.image) }}"
                        alt="{{ item.name }}">

                    <div class="card-body d-flex flex-column">
                        <h4 class="card-title">{{ item.name }}</h4>
                        <p class="card-text">{{ item.description }}</p>
                        <h4 class="card-text mt-auto text-end">A${{ item.price }}</h4>
                    </div>
                </a>
                <div class="card-footer bg-white border-top-0">
                    <form method="POST" action="{{ url_for('main.adding_to_basket', item_id=item.id) }}">
                        <button type="submit" class="btn button w-100">Add to Cart</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <div class="col-12 text-center">
            <p>No items available for the selected category.</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}